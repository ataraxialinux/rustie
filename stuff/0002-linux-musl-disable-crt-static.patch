From 8cc00ae1cc3f9c17bc8728f1c0abafcb089a5d77 Mon Sep 17 00:00:00 2001
From: Ishimoto Shinobu <nagakamira@gmail.com>
Date: Sat, 26 Sep 2020 19:00:55 +0900
Subject: [PATCH 2/2] linux-musl: disable crt-static

Signed-off-by: Ishimoto Shinobu <nagakamira@gmail.com>
---
 compiler/rustc_target/src/spec/linux_musl_base.rs | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/compiler/rustc_target/src/spec/linux_musl_base.rs b/compiler/rustc_target/src/spec/linux_musl_base.rs
index b90e91d29..ad098a47e 100644
--- a/compiler/rustc_target/src/spec/linux_musl_base.rs
+++ b/compiler/rustc_target/src/spec/linux_musl_base.rs
@@ -9,7 +9,7 @@ pub fn opts() -> TargetOptions {
     base.crt_objects_fallback = Some(CrtObjectsFallback::Musl);
 
     // These targets statically link libc by default
-    base.crt_static_default = true;
+    base.crt_static_default = false;
     // These targets allow the user to choose between static and dynamic linking.
     base.crt_static_respected = true;
 
-- 
2.28.0

